version: 0.2

env:
  parameter-store:
    token: common
    sonar_url: sonarurl
phases: 
  install: 
    runtime-versions: 
      dotnet: 3.1 
  pre_build: 
    commands: 
      - echo Restore started on `date`.
      - dotnet tool install --global dotnet-sonarscanner
      #- dotnet sonarscanner begin /k:"Dotnet" /d:sonar.host.url="http://65.1.64.68" /d:sonar.login="token"
      #- dotnet sonarscanner begin /k:$sonar_project /d:sonar.host.url=$sonar_url /d:sonar.login=$token
      - dotnet sonarscanner begin /k:"dotnet2344" /d:sonar.host.url=$sonar_url /d:sonar.login=$token
      - dotnet build 
      - dotnet sonarscanner end /d:sonar.login=$token